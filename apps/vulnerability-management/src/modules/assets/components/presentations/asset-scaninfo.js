import React from 'react';
import PropTypes from 'prop-types';
import { PlanePreviewAttr, PlanePreviewAttrItem } from '@hivekit/plane';
import { H5 } from '@hivekit/header';
import { Text } from '@hivekit/text';

import { Utils } from 'tio-alloy';
import { SourceIconListView } from 'tio-vm/modules/assets/components/presentations';

const { dateFormat, dateFormatStrings } = Utils;

// TODO intl -- labels
export const AssetScanInfoView = ({ assetInfo }) => {
    const { DATE_FORMAT_WITHTIME } = dateFormatStrings;

    // TEMP style on H5 marginTop: 16
    return (
        <React.Fragment>
            <H5 style={{ marginTop: 16 }}>Scan Information</H5>
            <PlanePreviewAttr content={
                <React.Fragment>
                    <PlanePreviewAttrItem label='FIRST SEEN'>
                        <Text size={1}>
                            {dateFormat(assetInfo.first_seen, DATE_FORMAT_WITHTIME)}
                        </Text>
                    </PlanePreviewAttrItem>
                    <PlanePreviewAttrItem label='LAST SEEN'>
                        <Text size={1}>
                            {dateFormat(assetInfo.last_seen, DATE_FORMAT_WITHTIME)}
                        </Text>
                    </PlanePreviewAttrItem>
                    <PlanePreviewAttrItem label='LAST AUTHENTICATION'>
                        <Text size={1}>
                            {
                                assetInfo.last_authenticated_scan_date &&
                                dateFormat(assetInfo.last_authenticated_scan_date, DATE_FORMAT_WITHTIME)
                            }
                        </Text>
                    </PlanePreviewAttrItem>
                    <PlanePreviewAttrItem label='SOURCE'>
                        <SourceIconListView sources={assetInfo.sources} />
                    </PlanePreviewAttrItem>
                </React.Fragment>
            } />
        </React.Fragment>
    );
};
AssetScanInfoView.propTypes = {
    assetInfo: PropTypes.object.isRequired
};
