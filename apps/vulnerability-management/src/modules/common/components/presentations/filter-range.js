import React from 'react';
import PropTypes from 'prop-types';
import { spacing } from '@hivekit/core';
import { Select } from '@hivekit/select';

import {
    FILTER_RANGE,
    FILTER_RANGE_DEFAULT_INDEX
} from 'tio-vm/modules/common/constants';

// nudge down 4 px off type, temp fix until header rewritten in hive pattern
const vmRangeStyle = {
    position: 'absolute',
    top: 36,
    right: spacing[4],
    width: 132
};

export class FilterRangeView extends React.Component {
    static propTypes = {
        filterRange: PropTypes.number.isRequired,
        updateFilterRange: PropTypes.func.isRequired
    };

    constructor () {
        super();
        this.rangeChange = this.rangeChange.bind(this);
    }

    componentWillUnmount () {
        this.props.updateFilterRange(FILTER_RANGE[FILTER_RANGE_DEFAULT_INDEX].value);
    }

    rangeChange (range) {
        this.props.updateFilterRange(range.value);
    }

    render () {
        const { filterRange } = this.props;

        return (
            <div style={vmRangeStyle}>
                <Select
                    value={filterRange}
                    options={FILTER_RANGE}
                    onChange={this.rangeChange}>
                </Select>
            </div>
        );
    }
}
